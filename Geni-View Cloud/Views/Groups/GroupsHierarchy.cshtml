@{
    ViewBag.Title = "Group Hierarchy";
}
<style>
    table {
        border-collapse: separate !important;
    }
</style>
@section scripts {
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load("current", { packages: ["orgchart"] });
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            $.ajax({
                type: 'POST',
                dataType: 'json',
                contentType: 'application/json',
                url: '@Url.Action("GetChartData")',
                success: function (chartsData) {
                    var data = new google.visualization.DataTable();

                    data.addColumn('string', 'Group');
                    data.addColumn('string', 'ParentGroup');
                    data.addRow([{ v: chartsData[0].ParentGroupID, f: chartsData[0].ParentGroupName }, ''])

                    for (var i = 0; i < chartsData.length; i++) {
                        data.addRow
                            ([
                                { v: chartsData[i].GroupID, f: chartsData[i].GroupName, },
                                { v: chartsData[i].ParentGroupID, f: chartsData[i].ParentGroupName },
                            ]);
                    }
                    var options = {
                        size: 'large',
                        allowHtml: 'true',
                        allowCollapse: 'true',
                    };

                    var chart = new google.visualization.OrgChart(document.getElementById('drawChartholder'));
                    chart.draw(data, options);
                },
                error: function (data) {
                    alertify.error('Can not access to database, please try again.');
                }
            });
        };
    </script>
}
<div class="row">
    <div class="panel maincontainer">
        <div class="panel-heading">@ViewBag.Title</div>
        <div class="panel-body">
            <div id="drawChartholder" />
        </div>
    </div>
</div>

